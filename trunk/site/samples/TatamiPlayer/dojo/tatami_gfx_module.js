/*
	Copyright (c) 2004-2008, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is a compiled version of Dojo, built for deployment and not for
	development. To get an editable version, please visit:

		http://dojotoolkit.org

	for documentation and information on getting the source.
*/

if(!dojo._hasResource["dojox.gfx.matrix"]){dojo._hasResource["dojox.gfx.matrix"]=true;dojo.provide("dojox.gfx.matrix");(function(){var m=dojox.gfx.matrix;m._degToRad=function(_2){return Math.PI*_2/180;};m._radToDeg=function(_3){return _3/Math.PI*180;};m.Matrix2D=function(_4){if(_4){if(typeof _4=="number"){this.xx=this.yy=_4;}else{if(_4 instanceof Array){if(_4.length>0){var _5=m.normalize(_4[0]);for(var i=1;i<_4.length;++i){var l=_5,r=dojox.gfx.matrix.normalize(_4[i]);_5=new m.Matrix2D();_5.xx=l.xx*r.xx+l.xy*r.yx;_5.xy=l.xx*r.xy+l.xy*r.yy;_5.yx=l.yx*r.xx+l.yy*r.yx;_5.yy=l.yx*r.xy+l.yy*r.yy;_5.dx=l.xx*r.dx+l.xy*r.dy+l.dx;_5.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}dojo.mixin(this,_5);}}else{dojo.mixin(this,_4);}}}};dojo.extend(m.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0});dojo.mixin(m,{identity:new m.Matrix2D(),flipX:new m.Matrix2D({xx:-1}),flipY:new m.Matrix2D({yy:-1}),flipXY:new m.Matrix2D({xx:-1,yy:-1}),translate:function(a,b){if(arguments.length>1){return new m.Matrix2D({dx:a,dy:b});}return new m.Matrix2D({dx:a.x,dy:a.y});},scale:function(a,b){if(arguments.length>1){return new m.Matrix2D({xx:a,yy:b});}if(typeof a=="number"){return new m.Matrix2D({xx:a,yy:a});}return new m.Matrix2D({xx:a.x,yy:a.y});},rotate:function(_d){var c=Math.cos(_d);var s=Math.sin(_d);return new m.Matrix2D({xx:c,xy:-s,yx:s,yy:c});},rotateg:function(_10){return m.rotate(m._degToRad(_10));},skewX:function(_11){return new m.Matrix2D({xy:Math.tan(_11)});},skewXg:function(_12){return m.skewX(m._degToRad(_12));},skewY:function(_13){return new m.Matrix2D({yx:Math.tan(_13)});},skewYg:function(_14){return m.skewY(m._degToRad(_14));},reflect:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=2*a*b/n2;return new m.Matrix2D({xx:2*a2/n2-1,xy:xy,yx:xy,yy:2*b2/n2-1});},project:function(a,b){if(arguments.length==1){b=a.y;a=a.x;}var a2=a*a,b2=b*b,n2=a2+b2,xy=a*b/n2;return new m.Matrix2D({xx:a2/n2,xy:xy,yx:xy,yy:b2/n2});},normalize:function(_21){return (_21 instanceof m.Matrix2D)?_21:new m.Matrix2D(_21);},clone:function(_22){var obj=new m.Matrix2D();for(var i in _22){if(typeof (_22[i])=="number"&&typeof (obj[i])=="number"&&obj[i]!=_22[i]){obj[i]=_22[i];}}return obj;},invert:function(_25){var M=m.normalize(_25),D=M.xx*M.yy-M.xy*M.yx,M=new m.Matrix2D({xx:M.yy/D,xy:-M.xy/D,yx:-M.yx/D,yy:M.xx/D,dx:(M.xy*M.dy-M.yy*M.dx)/D,dy:(M.yx*M.dx-M.xx*M.dy)/D});return M;},_multiplyPoint:function(_28,x,y){return {x:_28.xx*x+_28.xy*y+_28.dx,y:_28.yx*x+_28.yy*y+_28.dy};},multiplyPoint:function(_2b,a,b){var M=m.normalize(_2b);if(typeof a=="number"&&typeof b=="number"){return m._multiplyPoint(M,a,b);}return m._multiplyPoint(M,a.x,a.y);},multiply:function(_2f){var M=m.normalize(_2f);for(var i=1;i<arguments.length;++i){var l=M,r=m.normalize(arguments[i]);M=new m.Matrix2D();M.xx=l.xx*r.xx+l.xy*r.yx;M.xy=l.xx*r.xy+l.xy*r.yy;M.yx=l.yx*r.xx+l.yy*r.yx;M.yy=l.yx*r.xy+l.yy*r.yy;M.dx=l.xx*r.dx+l.xy*r.dy+l.dx;M.dy=l.yx*r.dx+l.yy*r.dy+l.dy;}return M;},_sandwich:function(_34,x,y){return m.multiply(m.translate(x,y),_34,m.translate(-x,-y));},scaleAt:function(a,b,c,d){switch(arguments.length){case 4:return m._sandwich(m.scale(a,b),c,d);case 3:if(typeof c=="number"){return m._sandwich(m.scale(a),b,c);}return m._sandwich(m.scale(a,b),c.x,c.y);}return m._sandwich(m.scale(a),b.x,b.y);},rotateAt:function(_3b,a,b){if(arguments.length>2){return m._sandwich(m.rotate(_3b),a,b);}return m._sandwich(m.rotate(_3b),a.x,a.y);},rotategAt:function(_3e,a,b){if(arguments.length>2){return m._sandwich(m.rotateg(_3e),a,b);}return m._sandwich(m.rotateg(_3e),a.x,a.y);},skewXAt:function(_41,a,b){if(arguments.length>2){return m._sandwich(m.skewX(_41),a,b);}return m._sandwich(m.skewX(_41),a.x,a.y);},skewXgAt:function(_44,a,b){if(arguments.length>2){return m._sandwich(m.skewXg(_44),a,b);}return m._sandwich(m.skewXg(_44),a.x,a.y);},skewYAt:function(_47,a,b){if(arguments.length>2){return m._sandwich(m.skewY(_47),a,b);}return m._sandwich(m.skewY(_47),a.x,a.y);},skewYgAt:function(_4a,a,b){if(arguments.length>2){return m._sandwich(m.skewYg(_4a),a,b);}return m._sandwich(m.skewYg(_4a),a.x,a.y);}});})();dojox.gfx.Matrix2D=dojox.gfx.matrix.Matrix2D;}if(!dojo._hasResource["dojox.gfx._base"]){dojo._hasResource["dojox.gfx._base"]=true;dojo.provide("dojox.gfx._base");(function(){var g=dojox.gfx,b=g._base;g._hasClass=function(_4f,_50){return ((" "+_4f.getAttribute("className")+" ").indexOf(" "+_50+" ")>=0);};g._addClass=function(_51,_52){var cls=_51.getAttribute("className");if((" "+cls+" ").indexOf(" "+_52+" ")<0){_51.setAttribute("className",cls+(cls?" ":"")+_52);}};g._removeClass=function(_54,_55){_54.setAttribute("className",_54.getAttribute("className").replace(new RegExp("(^|\\s+)"+_55+"(\\s+|$)"),"$1$2"));};b._getFontMeasurements=function(){var _56={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");div.style.position="absolute";div.style.left="-100px";div.style.top="0";div.style.width="30px";div.style.height="1000em";div.style.border="0";div.style.margin="0";div.style.padding="0";div.style.outline="0";div.style.lineHeight="1";div.style.overflow="hidden";dojo.body().appendChild(div);for(var p in _56){div.style.fontSize=p;_56[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _56;};var _59=null;b._getCachedFontMeasurements=function(_5a){if(_5a||!_59){_59=b._getFontMeasurements();}return _59;};var _5b=null,_5c={};b._getTextBox=function(_5d,_5e,_5f){var m;if(!_5b){m=_5b=dojo.doc.createElement("div");m.style.position="absolute";m.style.left="-10000px";m.style.top="0";dojo.body().appendChild(m);}else{m=_5b;}m.className="";m.style.border="0";m.style.margin="0";m.style.padding="0";m.style.outline="0";if(arguments.length>1&&_5e){for(var i in _5e){if(i in _5c){continue;}m.style[i]=_5e[i];}}if(arguments.length>2&&_5f){m.className=_5f;}m.innerHTML=_5d;return dojo.marginBox(m);};var _62=0;b._getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++_62);}while(dojo.byId(id));return id;};})();dojo.mixin(dojox.gfx,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:false,kerning:true},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},normalizeColor:function(_64){return (_64 instanceof dojo.Color)?_64:new dojo.Color(_64);},normalizeParameters:function(_65,_66){if(_66){var _67={};for(var x in _65){if(x in _66&&!(x in _67)){_65[x]=_66[x];}}}return _65;},makeParameters:function(_69,_6a){if(!_6a){return dojo.clone(_69);}var _6b={};for(var i in _69){if(!(i in _6b)){_6b[i]=dojo.clone((i in _6a)?_6a[i]:_69[i]);}}return _6b;},formatNumber:function(x,_6e){var val=x.toString();if(val.indexOf("e")>=0){val=x.toFixed(4);}else{var _70=val.indexOf(".");if(_70>=0&&val.length-_70>5){val=x.toFixed(4);}}if(x<0){return val;}return _6e?" "+val:val;},makeFontString:function(_71){return _71.style+" "+_71.variant+" "+_71.weight+" "+_71.size+" "+_71.family;},splitFontString:function(str){var _73=dojo.clone(dojox.gfx.defaultFont);var t=str.split(/\s+/);do{if(t.length<5){break;}_73.style=t[0];_73.varian=t[1];_73.weight=t[2];var i=t[3].indexOf("/");_73.size=i<0?t[3]:t[3].substring(0,i);var j=4;if(i<0){if(t[4]=="/"){j=6;break;}if(t[4].substr(0,1)=="/"){j=5;break;}}if(j+3>t.length){break;}_73.size=t[j];_73.family=t[j+1];}while(false);return _73;},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return dojox.gfx._base._getCachedFontMeasurements()["12pt"]/12;},pt2px:function(len){return len*dojox.gfx.px_in_pt();},px2pt:function(len){return len/dojox.gfx.px_in_pt();},normalizedLength:function(len){if(len.length==0){return 0;}if(len.length>2){var _7a=dojox.gfx.px_in_pt();var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "pt":return val*_7a;case "in":return val*72*_7a;case "pc":return val*12*_7a;case "mm":return val*dojox.gfx.mm_in_pt*_7a;case "cm":return val*dojox.gfx.cm_in_pt*_7a;}}return parseFloat(len);},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(a,b){return a&&b&&a==b;}});}if(!dojo._hasResource["dojox.gfx"]){dojo._hasResource["dojox.gfx"]=true;dojo.provide("dojox.gfx");dojo.loadInit(function(){var gfx=dojo.getObject("dojox.gfx",true),sl,_80,_81;if(!gfx.renderer){var _82=(typeof dojo.config.gfxRenderer=="string"?dojo.config.gfxRenderer:"svg,vml,silverlight,canvas").split(",");var ua=navigator.userAgent,_84=0,_85=0;if(dojo.isSafari>=3){if(ua.indexOf("iPhone")>=0||ua.indexOf("iPod")>=0){_81=ua.match(/Version\/(\d(\.\d)?(\.\d)?)\sMobile\/([^\s]*)\s?/);if(_81){_84=parseInt(_81[4].substr(0,3),16);}}if(!_84){_81=ua.match(/Android\s+(\d+\.\d+)/);if(_81){_85=parseFloat(_81[1]);}}}for(var i=0;i<_82.length;++i){switch(_82[i]){case "svg":if(!dojo.isIE&&(!_84||_84>=1521)&&!_85){dojox.gfx.renderer="svg";}break;case "vml":if(dojo.isIE){dojox.gfx.renderer="vml";}break;case "silverlight":try{if(dojo.isIE){sl=new ActiveXObject("AgControl.AgControl");if(sl&&sl.IsVersionSupported("1.0")){_80=true;}}else{if(navigator.plugins["Silverlight Plug-In"]){_80=true;}}}catch(e){_80=false;}finally{sl=null;}if(_80){dojox.gfx.renderer="silverlight";}break;case "canvas":if(!dojo.isIE){dojox.gfx.renderer="canvas";}break;}if(dojox.gfx.renderer){break;}}if(dojo.config.isDebug){}}});dojo.requireIf(dojox.gfx.renderer=="svg","dojox.gfx.svg");dojo.requireIf(dojox.gfx.renderer=="vml","dojox.gfx.vml");dojo.requireIf(dojox.gfx.renderer=="silverlight","dojox.gfx.silverlight");dojo.requireIf(dojox.gfx.renderer=="canvas","dojox.gfx.canvas");}if(!dojo._hasResource["dojox.gfx.shape"]){dojo._hasResource["dojox.gfx.shape"]=true;dojo.provide("dojox.gfx.shape");dojo.declare("dojox.gfx.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();var r=[];var g=dojox.gfx.matrix;r.push(g.multiplyPoint(m,b.x,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y+b.height));r.push(g.multiplyPoint(m,b.x,b.y+b.height));return r;},getEventSource:function(){return this.rawNode;},setShape:function(_8b){this.shape=dojox.gfx.makeParameters(this.shape,_8b);this.bbox=null;return this;},setFill:function(_8c){if(!_8c){this.fillStyle=null;return this;}var f=null;if(typeof (_8c)=="object"&&"type" in _8c){switch(_8c.type){case "linear":f=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,_8c);break;case "radial":f=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,_8c);break;case "pattern":f=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,_8c);break;}}else{f=dojox.gfx.normalizeColor(_8c);}this.fillStyle=f;return this;},setStroke:function(_8e){if(!_8e){this.strokeStyle=null;return this;}if(typeof _8e=="string"||dojo.isArray(_8e)||_8e instanceof dojo.Color){_8e={color:_8e};}var s=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_8e);s.color=dojox.gfx.normalizeColor(s.color);return this;},setTransform:function(_90){this.matrix=dojox.gfx.matrix.clone(_90?dojox.gfx.matrix.normalize(_90):dojox.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_93){return _93?this.setTransform([this.matrix,_93]):this;},applyLeftTransform:function(_94){return _94?this.setTransform([_94,this.matrix]):this;},applyTransform:function(_95){return _95?this.setTransform([this.matrix,_95]):this;},removeShape:function(_96){if(this.parent){this.parent.remove(this,_96);}return this;},_setParent:function(_97,_98){this.parent=_97;return this._updateParentMatrix(_98);},_updateParentMatrix:function(_99){this.parentMatrix=_99?dojox.gfx.matrix.clone(_99):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=dojox.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});dojox.gfx.shape._eventsProcessing={connect:function(_9c,_9d,_9e){return arguments.length>2?dojo.connect(this.getEventSource(),_9c,_9d,_9e):dojo.connect(this.getEventSource(),_9c,_9d);},disconnect:function(_9f){dojo.disconnect(_9f);}};dojo.extend(dojox.gfx.Shape,dojox.gfx.shape._eventsProcessing);dojox.gfx.shape.Container={_init:function(){this.children=[];},add:function(_a0){var _a1=_a0.getParent();if(_a1){_a1.remove(_a0,true);}this.children.push(_a0);return _a0._setParent(this,this._getRealMatrix());},remove:function(_a2,_a3){for(var i=0;i<this.children.length;++i){if(this.children[i]==_a2){if(_a3){}else{_a2.parent=null;_a2.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_a5){for(var i=0;i<this.children.length;++i){if(this.children[i]==_a5){this.children.splice(i,1);this.children.push(_a5);break;}}return this;},_moveChildToBack:function(_a7){for(var i=0;i<this.children.length;++i){if(this.children[i]==_a7){this.children.splice(i,1);this.children.unshift(_a7);break;}}return this;}};dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){dojo.forEach(this._nodes,dojo._destroyElement);this._nodes=[];dojo.forEach(this._events,dojo.disconnect);this._events=[];this.rawNode=null;if(dojo.isIE){while(this._parent.lastChild){dojo._destroyElement(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_a9){},whenLoaded:function(_aa,_ab){var f=dojo.hitch(_aa,_ab);if(this.isLoaded){f(this);}else{var h=dojo.connect(this,"onLoad",function(_ae){dojo.disconnect(h);f(_ae);});}}});dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing);dojo.declare("dojox.gfx.Point",null,{});dojo.declare("dojox.gfx.Rectangle",null,{});dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.Shape,{constructor:function(_af){this.shape=dojo.clone(dojox.gfx.defaultRect);this.rawNode=_af;},getBoundingBox:function(){return this.shape;}});dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.Shape,{constructor:function(_b0){this.shape=dojo.clone(dojox.gfx.defaultEllipse);this.rawNode=_b0;},getBoundingBox:function(){if(!this.bbox){var _b1=this.shape;this.bbox={x:_b1.cx-_b1.rx,y:_b1.cy-_b1.ry,width:2*_b1.rx,height:2*_b1.ry};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.Shape,{constructor:function(_b2){this.shape=dojo.clone(dojox.gfx.defaultCircle);this.rawNode=_b2;},getBoundingBox:function(){if(!this.bbox){var _b3=this.shape;this.bbox={x:_b3.cx-_b3.r,y:_b3.cy-_b3.r,width:2*_b3.r,height:2*_b3.r};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Line",dojox.gfx.Shape,{constructor:function(_b4){this.shape=dojo.clone(dojox.gfx.defaultLine);this.rawNode=_b4;},getBoundingBox:function(){if(!this.bbox){var _b5=this.shape;this.bbox={x:Math.min(_b5.x1,_b5.x2),y:Math.min(_b5.y1,_b5.y2),width:Math.abs(_b5.x2-_b5.x1),height:Math.abs(_b5.y2-_b5.y1)};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.Shape,{constructor:function(_b6){this.shape=dojo.clone(dojox.gfx.defaultPolyline);this.rawNode=_b6;},setShape:function(_b7,_b8){if(_b7&&_b7 instanceof Array){dojox.gfx.Shape.prototype.setShape.call(this,{points:_b7});if(_b8&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{dojox.gfx.Shape.prototype.setShape.call(this,_b7);}return this;},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var _bc={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(_bc.l>t.x){_bc.l=t.x;}if(_bc.r<t.x){_bc.r=t.x;}if(_bc.t>t.y){_bc.t=t.y;}if(_bc.b<t.y){_bc.b=t.y;}}this.bbox={x:_bc.l,y:_bc.t,width:_bc.r-_bc.l,height:_bc.b-_bc.t};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Image",dojox.gfx.Shape,{constructor:function(_be){this.shape=dojo.clone(dojox.gfx.defaultImage);this.rawNode=_be;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});dojo.declare("dojox.gfx.shape.Text",dojox.gfx.Shape,{constructor:function(_bf){this.fontStyle=null;this.shape=dojo.clone(dojox.gfx.defaultText);this.rawNode=_bf;},getFont:function(){return this.fontStyle;},setFont:function(_c0){this.fontStyle=typeof _c0=="string"?dojox.gfx.splitFontString(_c0):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_c0);this._setFont();return this;}});dojox.gfx.shape.Creator={createShape:function(_c1){switch(_c1.type){case dojox.gfx.defaultPath.type:return this.createPath(_c1);case dojox.gfx.defaultRect.type:return this.createRect(_c1);case dojox.gfx.defaultCircle.type:return this.createCircle(_c1);case dojox.gfx.defaultEllipse.type:return this.createEllipse(_c1);case dojox.gfx.defaultLine.type:return this.createLine(_c1);case dojox.gfx.defaultPolyline.type:return this.createPolyline(_c1);case dojox.gfx.defaultImage.type:return this.createImage(_c1);case dojox.gfx.defaultText.type:return this.createText(_c1);case dojox.gfx.defaultTextPath.type:return this.createTextPath(_c1);}return null;},createGroup:function(){return this.createObject(dojox.gfx.Group);},createRect:function(_c2){return this.createObject(dojox.gfx.Rect,_c2);},createEllipse:function(_c3){return this.createObject(dojox.gfx.Ellipse,_c3);},createCircle:function(_c4){return this.createObject(dojox.gfx.Circle,_c4);},createLine:function(_c5){return this.createObject(dojox.gfx.Line,_c5);},createPolyline:function(_c6){return this.createObject(dojox.gfx.Polyline,_c6);},createImage:function(_c7){return this.createObject(dojox.gfx.Image,_c7);},createText:function(_c8){return this.createObject(dojox.gfx.Text,_c8);},createPath:function(_c9){return this.createObject(dojox.gfx.Path,_c9);},createTextPath:function(_ca){return this.createObject(dojox.gfx.TextPath,{}).setText(_ca);},createObject:function(_cb,_cc){return null;}};}if(!dojo._hasResource["dojox.gfx.path"]){dojo._hasResource["dojox.gfx.path"]=true;dojo.provide("dojox.gfx.path");dojo.declare("dojox.gfx.path.Path",dojox.gfx.Shape,{constructor:function(_cd){this.shape=dojo.clone(dojox.gfx.defaultPath);this.segments=[];this.absolute=true;this.last={};this.rawNode=_cd;},setAbsoluteMode:function(_ce){this.absolute=typeof _ce=="string"?(_ce=="absolute"):_ce;return this;},getAbsoluteMode:function(){return this.absolute;},getBoundingBox:function(){return (this.bbox&&("l" in this.bbox))?{x:this.bbox.l,y:this.bbox.t,width:this.bbox.r-this.bbox.l,height:this.bbox.b-this.bbox.t}:null;},getLastPosition:function(){return "x" in this.last?this.last:null;},_updateBBox:function(x,y){if(this.bbox&&("l" in this.bbox)){if(this.bbox.l>x){this.bbox.l=x;}if(this.bbox.r<x){this.bbox.r=x;}if(this.bbox.t>y){this.bbox.t=y;}if(this.bbox.b<y){this.bbox.b=y;}}else{this.bbox={l:x,b:y,r:x,t:y};}},_updateWithSegment:function(_d1){var n=_d1.args,l=n.length;switch(_d1.action){case "M":case "L":case "C":case "S":case "Q":case "T":for(var i=0;i<l;i+=2){this._updateBBox(n[i],n[i+1]);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "H":for(var i=0;i<l;++i){this._updateBBox(n[i],this.last.y);}this.last.x=n[l-1];this.absolute=true;break;case "V":for(var i=0;i<l;++i){this._updateBBox(this.last.x,n[i]);}this.last.y=n[l-1];this.absolute=true;break;case "m":var _d5=0;if(!("x" in this.last)){this._updateBBox(this.last.x=n[0],this.last.y=n[1]);_d5=2;}for(var i=_d5;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1]);}this.absolute=false;break;case "l":case "t":for(var i=0;i<l;i+=2){this._updateBBox(this.last.x+=n[i],this.last.y+=n[i+1]);}this.absolute=false;break;case "h":for(var i=0;i<l;++i){this._updateBBox(this.last.x+=n[i],this.last.y);}this.absolute=false;break;case "v":for(var i=0;i<l;++i){this._updateBBox(this.last.x,this.last.y+=n[i]);}this.absolute=false;break;case "c":for(var i=0;i<l;i+=6){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1]);this._updateBBox(this.last.x+n[i+2],this.last.y+n[i+3]);this._updateBBox(this.last.x+=n[i+4],this.last.y+=n[i+5]);}this.absolute=false;break;case "s":case "q":for(var i=0;i<l;i+=4){this._updateBBox(this.last.x+n[i],this.last.y+n[i+1]);this._updateBBox(this.last.x+=n[i+2],this.last.y+=n[i+3]);}this.absolute=false;break;case "A":for(var i=0;i<l;i+=7){this._updateBBox(n[i+5],n[i+6]);}this.last.x=n[l-2];this.last.y=n[l-1];this.absolute=true;break;case "a":for(var i=0;i<l;i+=7){this._updateBBox(this.last.x+=n[i+5],this.last.y+=n[i+6]);}this.absolute=false;break;}var _d6=[_d1.action];for(var i=0;i<l;++i){_d6.push(dojox.gfx.formatNumber(n[i],true));}if(typeof this.shape.path=="string"){this.shape.path+=_d6.join("");}else{Array.prototype.push.apply(this.shape.path,_d6);}},_validSegments:{m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},_pushSegment:function(_d7,_d8){var _d9=this._validSegments[_d7.toLowerCase()];if(typeof _d9=="number"){if(_d9){if(_d8.length>=_d9){var _da={action:_d7,args:_d8.slice(0,_d8.length-_d8.length%_d9)};this.segments.push(_da);this._updateWithSegment(_da);}}else{var _da={action:_d7,args:[]};this.segments.push(_da);this._updateWithSegment(_da);}}},_collectArgs:function(_db,_dc){for(var i=0;i<_dc.length;++i){var t=_dc[i];if(typeof t=="boolean"){_db.push(t?1:0);}else{if(typeof t=="number"){_db.push(t);}else{if(t instanceof Array){this._collectArgs(_db,t);}else{if("x" in t&&"y" in t){_db.push(t.x,t.y);}}}}}},moveTo:function(){var _df=[];this._collectArgs(_df,arguments);this._pushSegment(this.absolute?"M":"m",_df);return this;},lineTo:function(){var _e0=[];this._collectArgs(_e0,arguments);this._pushSegment(this.absolute?"L":"l",_e0);return this;},hLineTo:function(){var _e1=[];this._collectArgs(_e1,arguments);this._pushSegment(this.absolute?"H":"h",_e1);return this;},vLineTo:function(){var _e2=[];this._collectArgs(_e2,arguments);this._pushSegment(this.absolute?"V":"v",_e2);return this;},curveTo:function(){var _e3=[];this._collectArgs(_e3,arguments);this._pushSegment(this.absolute?"C":"c",_e3);return this;},smoothCurveTo:function(){var _e4=[];this._collectArgs(_e4,arguments);this._pushSegment(this.absolute?"S":"s",_e4);return this;},qCurveTo:function(){var _e5=[];this._collectArgs(_e5,arguments);this._pushSegment(this.absolute?"Q":"q",_e5);return this;},qSmoothCurveTo:function(){var _e6=[];this._collectArgs(_e6,arguments);this._pushSegment(this.absolute?"T":"t",_e6);return this;},arcTo:function(){var _e7=[];this._collectArgs(_e7,arguments);this._pushSegment(this.absolute?"A":"a",_e7);return this;},closePath:function(){this._pushSegment("Z",[]);return this;},_setPath:function(_e8){var p=dojo.isArray(_e8)?_e8:_e8.match(dojox.gfx.pathSvgRegExp);this.segments=[];this.absolute=true;this.bbox={};this.last={};if(!p){return;}var _ea="",_eb=[],l=p.length;for(var i=0;i<l;++i){var t=p[i],x=parseFloat(t);if(isNaN(x)){if(_ea){this._pushSegment(_ea,_eb);}_eb=[];_ea=t;}else{_eb.push(x);}}this._pushSegment(_ea,_eb);},setShape:function(_f0){dojox.gfx.Shape.prototype.setShape.call(this,typeof _f0=="string"?{path:_f0}:_f0);var _f1=this.shape.path;this.shape.path=[];this._setPath(_f1);this.shape.path=this.shape.path.join("");return this;},_2PI:Math.PI*2});dojo.declare("dojox.gfx.path.TextPath",dojox.gfx.path.Path,{constructor:function(_f2){if(!("text" in this)){this.text=dojo.clone(dojox.gfx.defaultTextPath);}if(!("fontStyle" in this)){this.fontStyle=dojo.clone(dojox.gfx.defaultFont);}},getText:function(){return this.text;},setText:function(_f3){this.text=dojox.gfx.makeParameters(this.text,typeof _f3=="string"?{text:_f3}:_f3);this._setText();return this;},getFont:function(){return this.fontStyle;},setFont:function(_f4){this.fontStyle=typeof _f4=="string"?dojox.gfx.splitFontString(_f4):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_f4);this._setFont();return this;}});}if(!dojo._hasResource["dojox.gfx.shape"]){dojo._hasResource["dojox.gfx.shape"]=true;dojo.provide("dojox.gfx.shape");dojo.declare("dojox.gfx.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix();var r=[];var g=dojox.gfx.matrix;r.push(g.multiplyPoint(m,b.x,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y));r.push(g.multiplyPoint(m,b.x+b.width,b.y+b.height));r.push(g.multiplyPoint(m,b.x,b.y+b.height));return r;},getEventSource:function(){return this.rawNode;},setShape:function(_f9){this.shape=dojox.gfx.makeParameters(this.shape,_f9);this.bbox=null;return this;},setFill:function(_fa){if(!_fa){this.fillStyle=null;return this;}var f=null;if(typeof (_fa)=="object"&&"type" in _fa){switch(_fa.type){case "linear":f=dojox.gfx.makeParameters(dojox.gfx.defaultLinearGradient,_fa);break;case "radial":f=dojox.gfx.makeParameters(dojox.gfx.defaultRadialGradient,_fa);break;case "pattern":f=dojox.gfx.makeParameters(dojox.gfx.defaultPattern,_fa);break;}}else{f=dojox.gfx.normalizeColor(_fa);}this.fillStyle=f;return this;},setStroke:function(_fc){if(!_fc){this.strokeStyle=null;return this;}if(typeof _fc=="string"||dojo.isArray(_fc)||_fc instanceof dojo.Color){_fc={color:_fc};}var s=this.strokeStyle=dojox.gfx.makeParameters(dojox.gfx.defaultStroke,_fc);s.color=dojox.gfx.normalizeColor(s.color);return this;},setTransform:function(_fe){this.matrix=dojox.gfx.matrix.clone(_fe?dojox.gfx.matrix.normalize(_fe):dojox.gfx.matrix.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_101){return _101?this.setTransform([this.matrix,_101]):this;},applyLeftTransform:function(_102){return _102?this.setTransform([_102,this.matrix]):this;},applyTransform:function(_103){return _103?this.setTransform([this.matrix,_103]):this;},removeShape:function(_104){if(this.parent){this.parent.remove(this,_104);}return this;},_setParent:function(_105,_106){this.parent=_105;return this._updateParentMatrix(_106);},_updateParentMatrix:function(_107){this.parentMatrix=_107?dojox.gfx.matrix.clone(_107):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=dojox.gfx.matrix.multiply(p.matrix,m);}p=p.parent;}return m;}});dojox.gfx.shape._eventsProcessing={connect:function(name,_10b,_10c){return arguments.length>2?dojo.connect(this.getEventSource(),name,_10b,_10c):dojo.connect(this.getEventSource(),name,_10b);},disconnect:function(_10d){dojo.disconnect(_10d);}};dojo.extend(dojox.gfx.Shape,dojox.gfx.shape._eventsProcessing);dojox.gfx.shape.Container={_init:function(){this.children=[];},add:function(_10e){var _10f=_10e.getParent();if(_10f){_10f.remove(_10e,true);}this.children.push(_10e);return _10e._setParent(this,this._getRealMatrix());},remove:function(_110,_111){for(var i=0;i<this.children.length;++i){if(this.children[i]==_110){if(_111){}else{_110.parent=null;_110.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){this.children=[];return this;},_moveChildToFront:function(_113){for(var i=0;i<this.children.length;++i){if(this.children[i]==_113){this.children.splice(i,1);this.children.push(_113);break;}}return this;},_moveChildToBack:function(_115){for(var i=0;i<this.children.length;++i){if(this.children[i]==_115){this.children.splice(i,1);this.children.unshift(_115);break;}}return this;}};dojo.declare("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){dojo.forEach(this._nodes,dojo._destroyElement);this._nodes=[];dojo.forEach(this._events,dojo.disconnect);this._events=[];this.rawNode=null;if(dojo.isIE){while(this._parent.lastChild){dojo._destroyElement(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_117){},whenLoaded:function(_118,_119){var f=dojo.hitch(_118,_119);if(this.isLoaded){f(this);}else{var h=dojo.connect(this,"onLoad",function(_11c){dojo.disconnect(h);f(_11c);});}}});dojo.extend(dojox.gfx.shape.Surface,dojox.gfx.shape._eventsProcessing);dojo.declare("dojox.gfx.Point",null,{});dojo.declare("dojox.gfx.Rectangle",null,{});dojo.declare("dojox.gfx.shape.Rect",dojox.gfx.Shape,{constructor:function(_11d){this.shape=dojo.clone(dojox.gfx.defaultRect);this.rawNode=_11d;},getBoundingBox:function(){return this.shape;}});dojo.declare("dojox.gfx.shape.Ellipse",dojox.gfx.Shape,{constructor:function(_11e){this.shape=dojo.clone(dojox.gfx.defaultEllipse);this.rawNode=_11e;},getBoundingBox:function(){if(!this.bbox){var _11f=this.shape;this.bbox={x:_11f.cx-_11f.rx,y:_11f.cy-_11f.ry,width:2*_11f.rx,height:2*_11f.ry};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Circle",dojox.gfx.Shape,{constructor:function(_120){this.shape=dojo.clone(dojox.gfx.defaultCircle);this.rawNode=_120;},getBoundingBox:function(){if(!this.bbox){var _121=this.shape;this.bbox={x:_121.cx-_121.r,y:_121.cy-_121.r,width:2*_121.r,height:2*_121.r};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Line",dojox.gfx.Shape,{constructor:function(_122){this.shape=dojo.clone(dojox.gfx.defaultLine);this.rawNode=_122;},getBoundingBox:function(){if(!this.bbox){var _123=this.shape;this.bbox={x:Math.min(_123.x1,_123.x2),y:Math.min(_123.y1,_123.y2),width:Math.abs(_123.x2-_123.x1),height:Math.abs(_123.y2-_123.y1)};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Polyline",dojox.gfx.Shape,{constructor:function(_124){this.shape=dojo.clone(dojox.gfx.defaultPolyline);this.rawNode=_124;},setShape:function(_125,_126){if(_125&&_125 instanceof Array){dojox.gfx.Shape.prototype.setShape.call(this,{points:_125});if(_126&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{dojox.gfx.Shape.prototype.setShape.call(this,_125);}return this;},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});dojo.declare("dojox.gfx.shape.Image",dojox.gfx.Shape,{constructor:function(_12c){this.shape=dojo.clone(dojox.gfx.defaultImage);this.rawNode=_12c;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});dojo.declare("dojox.gfx.shape.Text",dojox.gfx.Shape,{constructor:function(_12d){this.fontStyle=null;this.shape=dojo.clone(dojox.gfx.defaultText);this.rawNode=_12d;},getFont:function(){return this.fontStyle;},setFont:function(_12e){this.fontStyle=typeof _12e=="string"?dojox.gfx.splitFontString(_12e):dojox.gfx.makeParameters(dojox.gfx.defaultFont,_12e);this._setFont();return this;}});dojox.gfx.shape.Creator={createShape:function(_12f){switch(_12f.type){case dojox.gfx.defaultPath.type:return this.createPath(_12f);case dojox.gfx.defaultRect.type:return this.createRect(_12f);case dojox.gfx.defaultCircle.type:return this.createCircle(_12f);case dojox.gfx.defaultEllipse.type:return this.createEllipse(_12f);case dojox.gfx.defaultLine.type:return this.createLine(_12f);case dojox.gfx.defaultPolyline.type:return this.createPolyline(_12f);case dojox.gfx.defaultImage.type:return this.createImage(_12f);case dojox.gfx.defaultText.type:return this.createText(_12f);case dojox.gfx.defaultTextPath.type:return this.createTextPath(_12f);}return null;},createGroup:function(){return this.createObject(dojox.gfx.Group);},createRect:function(rect){return this.createObject(dojox.gfx.Rect,rect);},createEllipse:function(_131){return this.createObject(dojox.gfx.Ellipse,_131);},createCircle:function(_132){return this.createObject(dojox.gfx.Circle,_132);},createLine:function(line){return this.createObject(dojox.gfx.Line,line);},createPolyline:function(_134){return this.createObject(dojox.gfx.Polyline,_134);},createImage:function(_135){return this.createObject(dojox.gfx.Image,_135);},createText:function(text){return this.createObject(dojox.gfx.Text,text);},createPath:function(path){return this.createObject(dojox.gfx.Path,path);},createTextPath:function(text){return this.createObject(dojox.gfx.TextPath,{}).setText(text);},createObject:function(_139,_13a){return null;}};}