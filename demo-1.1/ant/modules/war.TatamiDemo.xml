<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE project [
			<!ENTITY setenv SYSTEM "../conf/setenv.xml">	
		]>
<project name="WAR Application TatamiDemo" default="help" basedir="../..">

	<!-- Generated by J2EE toolkit at 10-Aug-2007 04:13:32 PM -->
	
	<property name="module.type" value="war" />

	<!-- ******************************************** -->
	<!-- Module WAR                                   -->
	<!-- ******************************************** -->
	<!-- Fichier ant à utiliser pour la génération d'une web application.
	Pour la création d'un nouveau module WAR, faire une copie de ce fichier et modifier 
	simplement la propriété module.name ci-dessous.
	Ensuite, en cas de traitement spécifique, adapter éventellement le code fourni.
	La création d'un nouveau module nécessite aussi de créer un fichier de propriétés 
	war.monmodule.properties et des fichiers dans le sous-répertoire includes. -->

	<property name="module.name" value="TatamiDemo" />

	<!-- Chargement des propriétés générales (obligatoires) et des propriétés du projet (facultatives) -->
	    &setenv;
	    <property file="${ant.modules.dir}/${module.type}.${module.name}.properties" />

	<!-- TARGET all -->
	<!-- Les classes à ajouter sont définies dans ${module.type}.${module.name}.class.include
	Les librairies à ajouter sont définies dans ${module.type}.${module.name}.lib.include
	On génère les classes du module, on recopie l'environnement j2ee et les librairies, puis on 
	package le tout	dans un fichier jar placé dans ${dist.dir}/${module.type}/${module.name}.jar. -->
	<target name="all"
	        depends="build_war,package_war"
	        description="Génération et packaging de l'application web">
	</target>

	<!-- TARGET build_war -->
	<target name="build_war"
	        description="Compilation du module war">
		<ant antfile="${ant.conf.dir}/build_war.xml" target="compile" />
	</target>

	<!-- TARGET package_war -->
	<target name="package_war"
	        description="Construction du jar de déploiement ${module.name}.war">
		<ant antfile="${ant.conf.dir}/build_war.xml" target="package" />
	</target>

	<!-- TARGET test_war -->
	<!-- Les classes à tester sont définies dans ${module.type}.${module.name}.test.include -->
	<target name="test_war"
	        description="Test des classes du module war">
		<ant antfile="${ant.conf.dir}/report_junit.xml" target="test" />
	</target>

	<!-- TARGET help -->
	<target name="help" description="Affiche la liste des taches disponibles">
		<echo message="Taches disponibles: all, clean, build_war, package_war, test_war" />
		<echo message="all: Enchaine build_war et package_war" />
		<echo message="clean: Suppression des répertoires et des fichiers générés" />
		<echo message="build_war: Génération des classes du module war" />
		<echo message="package_war : Construction du jar ${module.name}.war" />
		<echo message="test_war : Tests junit des classes du module war" />
	</target>

	<!-- TARGET clean -->
	<!-- Utiliser cette tâche pour provoquer une regénération complète -->
	<target name="clean"
	        description="Suppression des répertoires et des fichiers générés">
		<ant antfile="${ant.conf.dir}/common.xml" target="clean" />
	</target>

</project>
