<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE project [
		<!ENTITY setenv SYSTEM "../conf/setenv.xml">	
	]>
<project name="EAR Application TatamiDemo" default="help" basedir="../..">

	<!-- Generated by J2EE toolkit at 10-Aug-2007 04:16:52 PM -->
	
	<property name="module.type" value="ear" />

	<!-- ******************************************** -->
	<!-- Module EAR                                   -->
	<!-- ******************************************** -->
	<!-- Fichier ant à utiliser pour la génération d'un module EAR.
	Pour la création d'un nouveau module EAR, faire une copie de ce fichier et modifier 
	simplement la propriété module.name ci-dessous.
	Ensuite, en cas de traitement spécifique, adapter éventellement le code fourni.
	La création d'un nouveau module nécessite aussi de créer un fichier de propriétés 
	ear.monmodule.properties et des fichiers dans le sous-répertoire includes. -->

	<property name="module.name" value="TatamiDemo" />

	<!-- Chargement des propriétés générales (obligatoires) et des propriétés du projet (facultatives) -->
    &setenv;
    <property file="${ant.modules.dir}/${module.type}.${module.name}.properties" />

	<!-- TARGET all -->
	<!-- Les modules de l'ear sont définis dans ${module.type}.${module.name}.module.include
	Les librairies à ajouter sont définies dans ${module.type}.${module.name}.lib.include
	On recopie les modules, l'environnement j2ee et les librairies, puis on package le tout dans un fichier ear
	placé dans ${dist.dir}/${module.type}/${module.name}.ear. On déploie ensuite
	l'application dans le serveur pointé par ${server.name}.
	Les modules à packager dans l'ear ne sont pas reconstruits ici, ils doivent être
	prêts dans ${dist.dir}. -->
	<target name="all"
	        depends="package_ear,deploy_ear"
	        description="Packaging et déploiement du module ${module.type}">
	</target>

	<!-- TARGET package_ear -->
	<target name="package_ear"
	        description="Construction de l'ear de déploiement">
		<ant antfile="${ant.conf.dir}/build_ear.xml" target="package" />
	</target>

	<!-- TARGET deploy_ear -->
	<target name="deploy_ear"
		    description="deploy_ear : Déploiement de l'application sur le server ${server.name}">
		<ant antfile="${ant.conf.dir}/build_ear.xml" target="deploy" />
	</target>

	<!-- TARGET undeploy_ear -->
	<target name="undeploy_ear"
		    description="undeploy_ear : Suppression de l'application sur le server ${server.name}">
		<ant antfile="${ant.conf.dir}/build_ear.xml" target="undeploy" />
	</target>

	<!-- TARGET help -->
	<target name="help" description="Affiche la liste des taches disponibles">
		<echo message="Taches disponibles: all, clean, package_ear, deploy_ear" />
		<echo message="all: Enchaine package_ear et deploy_ear" />
		<echo message="clean: Suppression des répertoires et des fichiers générés" />
		<echo message="package_ear: Construction de l'ear de déploiement ${module.name}.ear" />
		<echo message="deploy_ear : Déploiement de l'application sur le server ${server.name}" />
	</target>

	<!-- TARGET clean -->
	<!-- Utiliser cette tâche pour provoquer une regénération complète -->
	<target name="clean"
	        description="Suppression des répertoires et des fichiers générés">
		<ant antfile="${ant.conf.dir}/common.xml" target="clean" />
	</target>

</project>